close all;
clear;
clc;

format long
% J[11]  0.902 -45.363;J[12]  0.383 -179.843;J[21]  0.420 -4.662;J[22]  0.931 46.226;1000;E00
% 1550.01 nm
% J[11]  0.907 -44.460;J[12]  0.405 -178.349;J[21]  0.416 -3.936;J[22]  0.917 44.923;1000;E00

% 1550.00 nm
%J[11]  0.870  7.368;J[12]  0.557 -138.518;J[21]  0.646 -39.584;J[22]  0.736 -8.434;1000;E00
% 1551.00 nm
%J[11]  0.797 -64.374;J[12]  0.605 -66.324;J[21]  0.600 -111.640;J[22]  0.799 63.215;1000;E00

J11_m = [0.870 0.797]; 
J11_p = [7.368 -64.374];

J12_m = [0.557 0.605]; 
J12_p = [-138.518 -66.324];

J21_m = [0.646 0.6]; 
J21_p = [-39.584 -111.640];

J22_m = [0.736 0.799]; 
J22_p = [-8.434 63.215];


J11 = [J11_m(1)*exp(1i*J11_p(1)*pi/180) J11_m(2)*exp(1i*J11_p(2)*pi/180)];
J12 = [J12_m(1)*exp(1i*J12_p(1)*pi/180) J12_m(2)*exp(1i*J12_p(2)*pi/180)];
J21 = [J21_m(1)*exp(1i*J21_p(1)*pi/180) J21_m(2)*exp(1i*J21_p(2)*pi/180)];
J22 = [J22_m(1)*exp(1i*J22_p(1)*pi/180) J22_m(2)*exp(1i*J22_p(2)*pi/180)];

J_1 = [ J11(1) J12(1)
        J21(1) J22(1) ];

J_2 = [ J11(2) J12(2)
        J21(2) J22(2) ];

p = eig(J_2*inv(J_1));
%p = eig(J_1*inv(J_2));

% [a1,b1] = cart2pol(real(p(1)),imag(p(1)));
% [a2,b2] = cart2pol(real(p(2)),imag(p(2)));

P = p(1)/p(2);

[t,a] = cart2pol(real(P),imag(P));
c = 299792458; %ms-1

w1 = 1550.00*1e-9;%nm
w2 = 1551.00*1e-9;%nm

f1 = c/w1;
f2 = c/w2;

df = (f1-f2);

DGD1 = (t/df)*1e12
